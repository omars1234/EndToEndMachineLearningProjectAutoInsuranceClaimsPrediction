<!--
flask_form_template.html
A single-file HTML + CSS + minimal JS template for accepting numerical and categorical inputs.
Drop this file into your Flask `templates/` folder and place static assets (if any) in `static/`.
This file posts JSON to /predict via fetch — adapt the endpoint to your Flask route.
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Predictor Form</title>
  <style>
    :root{
      --bg: #0f172a;
      --card: #0b1220;
      --muted: #9aa4bf;
      --accent: #7c3aed;
      --accent-2: #06b6d4;
      --glass: rgba(255,255,255,0.04);
      --success: #10b981;
      --danger: #ef4444;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#071028);color:#e6eef8}

    .container{max-width:980px;margin:48px auto;padding:24px}

    .card{
      background: linear-gradient(180deg,var(--card), #061123);
      border-radius:14px;
      padding:22px;
      box-shadow: 0 8px 30px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.03);
    }

    h1{margin:0 0 8px;font-weight:600;font-size:20px}
    p.lead{margin:0 0 20px;color:var(--muted)}

    form.row{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
    @media (max-width:720px){form.row{grid-template-columns:1fr}}

    .field{display:flex;flex-direction:column}
    label{font-size:13px;margin-bottom:8px;color:var(--muted)}
    input[type="text"], input[type="number"], select{
      padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);color:inherit;outline:none;font-size:14px
    }
    input::placeholder{color:rgba(255,255,255,0.35)}

    .small{font-size:12px;color:var(--muted);margin-top:6px}

    .fullwidth{grid-column:1 / -1}

    .controls{display:flex;gap:10px;align-items:center;margin-top:18px}
    button{background:linear-gradient(90deg,var(--accent),var(--accent-2));border:none;padding:10px 16px;color:white;border-radius:10px;cursor:pointer;font-weight:600}
    button:disabled{opacity:0.6;cursor:not-allowed}

    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);padding:8px 12px;border-radius:10px}

    .result{margin-top:18px;padding:12px;border-radius:10px;background:rgba(8,12,20,0.5);border:1px solid rgba(255,255,255,0.03)}
    .result .value{font-weight:700;font-size:18px}

    /* little helper styles */
    .inline{display:flex;gap:8px;align-items:center}
    .chip{background:rgba(255,255,255,0.03);padding:6px 10px;border-radius:999px;font-size:13px}

    /* validation */
    .error{color:var(--danger);font-size:13px;margin-top:8px}
    .success{color:var(--success);font-size:13px;margin-top:8px}

  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="header inline" style="justify-content:space-between">
        <div>
          <h1>Model Input Form</h1>
          <p class="lead">Enter numeric and categorical features below. This template sends JSON to <code>/predict</code>.</p>
        </div>
        <div class="chip">Flask-friendly</div>
      </div>

      <form id="predict-form" class="row" autocomplete="off">      
    
        
        <div class="field">
          <label for="Veh_value"> Veh value:</label>
          <input type="text" name="Veh_value" id="Veh_value" class="input-text" placeholder="Veh_value" required>
          <div class="small">Numerical — Allow decimals</div>
        </div>

        <div class="field">
          <label for="Exposure"> Exposure:</label>
          <input type="text" name="Exposure" id="Exposure" class="input-text" placeholder="Exposure" required>
          <div class="small">Allow decimals </div>
        </div>

        <div class="field">
          <label for="Claims_cost"> Claims cost:</label>
          <input type="text" name="Claims_cost" id="Claims_cost" class="input-text" placeholder="Claims_cost" required>
          <div class="small">Numerical — Allow decimals</div>
        </div>


        <div class="field">
          <label for="Veh_body"> Veh body:</label>
                        <select name="Veh_body" id="Veh_body">
                            <option selected="">select veh_body</option>
                            <option value='BUS'>BUS</option>
                            <option value='CONVT'>CONVT</option>
                            <option value='COUPE'>COUPE</option>
                            <option value='HBACK'>HBACK</option>
                            <option value='HDTOP'>HDTOP</option>
                            <option value='MCARA'>MCARA</option>
                            <option value='MIBUS'>MIBUS</option>
                            <option value='PANVN'>PANVN</option>
                            <option value='RDSTR'>RDSTR</option>
                            <option value='SEDAN'>SEDAN</option>
                            <option value='STNWG'>STNWG</option>
                            <option value='TRUCK'>TRUCK</option>
                            <option value='UTE'>UTE</option>
                        </select>    
          <div class="small">Categorical — will be one-hot / encoded server-side.</div>
        </div>



         <div class="field">
          <label for="Veh_age"> Veh age:</label>
                        <select name="Veh_age" id="Veh_age">
                            <option selected="">select veh_age</option>
                            <option value=1>1</option>
                            <option value=2>2</option>
                            <option value=3>3</option>
                            <option value=4>4</option>
                        </select>    
          <div class="small">Categorical — will be one-hot / encoded server-side.</div>
        </div>



         <div class="field">
          <label for="Gender"> Gender:</label>
           <select name="Gender" id="Gender">
                            <option selected="">select veh_age</option>
                            <option value='F'>Femal</option>
                            <option value='M'>Male</option>
                        </select>    
          <div class="small">Categorical — will be one-hot / encoded server-side.</div>
        </div>


        <div class="field">
          <label for="Area"> Area:</label>
                        <select name="Area" id="Area">
                            <option selected="">select Area</option>
                            <option value='A'>A</option>
                            <option value='B'>B</option>
                            <option value='C'>C</option>
                            <option value='D'>D</option>
                            <option value='E'>E</option>
                            <option value='F'>F</option>
                        </select>    
          <div class="small">Categorical — will be one-hot / encoded server-side.</div>
        </div>


        <div class="field">
          <label for="Age_category"> Age category:</label>
                        <select name="Age_category" id="Age_category">
                            <option selected="">select Age_category</option>
                            <option value=1>1</option>
                            <option value=2>2</option>
                            <option value=3>3</option>
                            <option value=4>4</option>
                            <option value=5>5</option>
                            <option value=6>6</option>
                        </select>  
          <div class="small">Categorical — will be one-hot / encoded server-side.</div>
        </div>

          




        <!-- Extra: text feature -->
        <div class="field fullwidth">
          <label for="notes">Notes (optional)</label>
          <input id="notes" name="notes" type="text" placeholder="Any additional info...">
        </div>

        <div class="field fullwidth">
          <div class="controls">
            <button id="submit-btn" type="submit">Predict</button>
            <button id="clear-btn" type="button" class="btn-ghost">Clear</button>
            <div id="spinner" style="display:none;margin-left:8px">Processing…</div>
          </div>
        </div>

        <div id="feedback" class="fullwidth" style="display:none"></div>
        <div id="result" class="result fullwidth" style="display:none">
          
            <div class="value" id="result-value">—</div>
            <div class="small" id="result-details"></div>
         
        </div>
      </form>

    </div>
  </div>

<script>
  const form = document.getElementById('predict-form');
  const submitBtn = document.getElementById('submit-btn');
  const clearBtn = document.getElementById('clear-btn');
  const spinner = document.getElementById('spinner');
  const feedback = document.getElementById('feedback');
  const resultBox = document.getElementById('result');
  const resultValue = document.getElementById('result-value');
  const resultDetails = document.getElementById('result-details');

  clearBtn.addEventListener('click', ()=>{
    form.reset();
    feedback.style.display='none';
    resultBox.style.display='none';
  });

  form.addEventListener('submit', async (e)=>{
    e.preventDefault();
    feedback.style.display='none';
    resultBox.style.display='none';

    // gather form data into an object
    const data = {};
    new FormData(form).forEach((value, key) => {
      if(value === "") value = null;

      // numeric fields from your form
      const numericFields = ['Veh_value','Exposure','Claims_cost'];
      if(value !== null && !isNaN(value) && value !== '' && numericFields.includes(key)){
        value = Number(value);
      }

      data[key] = value;
    });

    // show spinner
    spinner.style.display='inline-block';
    submitBtn.disabled = true;

    try{
      // send to Flask endpoint /predict as JSON
      const resp = await fetch('/predict',{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(data)
      });

      const payload = await resp.json();
      if(!resp.ok){
        showFeedback(payload.error || 'Server error', 'error');
      } else {
        // expected payload: {prediction: "something", details: {...}}
        resultValue.textContent = payload.prediction ?? '—';
        resultDetails.textContent = payload.details ? JSON.stringify(payload.details) : '';
        resultBox.style.display='block';
        showFeedback('Prediction returned successfully', 'success');
      }
    } catch(err){
      showFeedback('Network or server error — ' + err.message, 'error');
    } finally{
      spinner.style.display='none';
      submitBtn.disabled = false;
    }
  });

  function showFeedback(msg, type){
    feedback.style.display='block';
    feedback.textContent = msg;
    feedback.className = type === 'error' ? 'error fullwidth' : 'success fullwidth';
  }
</script>

</body>
</html>